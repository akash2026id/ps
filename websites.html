<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProShop - Professional E-commerce</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3f37c9;
            --success: #4cc9f0;
            --danger: #f72585;
            --warning: #f8961e;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f7fb;
            color: var(--dark);
            line-height: 1.6;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }

        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 15px 0;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        .logo i {
            margin-right: 10px;
            font-size: 2rem;
        }

        .search-bar {
            flex: 1;
            max-width: 500px;
            margin: 0 20px;
            position: relative;
        }

        .search-bar input {
            width: 100%;
            padding: 10px 15px;
            border-radius: 30px;
            border: none;
            outline: none;
            font-size: 1rem;
            box-shadow: var(--shadow);
        }

        .search-bar button {
            position: absolute;
            right: 5px;
            top: 5px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            cursor: pointer;
            transition: var(--transition);
        }

        .search-bar button:hover {
            background: var(--secondary);
        }

        .nav-buttons {
            display: flex;
            align-items: center;
        }

        .nav-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 10px;
            cursor: pointer;
            transition: var(--transition);
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .user-menu {
            position: relative;
        }

        .user-dropdown {
            position: absolute;
            top: 50px;
            right: 0;
            background: white;
            color: var(--dark);
            width: 200px;
            border-radius: 10px;
            box-shadow: var(--shadow);
            padding: 10px 0;
            display: none;
            z-index: 100;
        }

        .user-dropdown.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .user-dropdown a {
            display: block;
            padding: 10px 20px;
            text-decoration: none;
            color: var(--dark);
            transition: var(--transition);
        }

        .user-dropdown a:hover {
            background: var(--light);
        }

        /* Main Content */
        .main-content {
            min-height: calc(100vh - 140px);
            padding: 30px 0;
        }

        /* Auth Forms */
        .auth-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 80vh;
        }

        .auth-form {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: var(--shadow);
            width: 100%;
            max-width: 450px;
            animation: slideUp 0.5s ease;
        }

        .form-title {
            text-align: center;
            margin-bottom: 25px;
            color: var(--primary);
            font-size: 1.8rem;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-control:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }

        .btn {
            display: inline-block;
            padding: 12px 25px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
        }

        .btn:hover {
            background: var(--secondary);
            transform: translateY(-2px);
        }

        .btn-block {
            display: block;
            width: 100%;
        }

        .btn-success {
            background: var(--success);
        }

        .btn-danger {
            background: var(--danger);
        }

        .btn-warning {
            background: var(--warning);
        }

        .form-footer {
            text-align: center;
            margin-top: 20px;
        }

        .form-footer a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
        }

        /* Products Grid */
        .section-title {
            margin-bottom: 25px;
            font-size: 1.8rem;
            color: var(--dark);
            position: relative;
            padding-bottom: 10px;
        }

        .section-title:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 60px;
            height: 4px;
            background: var(--primary);
            border-radius: 2px;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 25px;
        }

        .product-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            position: relative;
            cursor: pointer;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
        }

        .product-img {
            height: 200px;
            width: 100%;
            object-fit: cover;
        }

        .product-info {
            padding: 15px;
        }

        .product-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--dark);
        }

        .product-description {
            color: var(--gray);
            font-size: 0.9rem;
            margin-bottom: 15px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .product-price {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .product-actions {
            display: flex;
            justify-content: space-between;
        }

        /* Product Details Page */
        .product-details {
            background: white;
            border-radius: 15px;
            box-shadow: var(--shadow);
            overflow: hidden;
            display: none;
        }

        .product-details.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .product-details-content {
            display: flex;
            padding: 30px;
        }

        .product-details-image {
            flex: 1;
            max-width: 500px;
            margin-right: 30px;
        }

        .product-details-image img {
            width: 100%;
            border-radius: 10px;
            object-fit: cover;
        }

        .product-details-info {
            flex: 1;
        }

        .product-details-title {
            font-size: 2rem;
            margin-bottom: 15px;
            color: var(--dark);
        }

        .product-details-price {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 20px;
        }

        .product-details-description {
            color: var(--gray);
            margin-bottom: 25px;
            line-height: 1.7;
        }

        .back-to-home {
            display: inline-flex;
            align-items: center;
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
            margin-bottom: 20px;
            transition: var(--transition);
        }

        .back-to-home:hover {
            color: var(--secondary);
        }

        .back-to-home i {
            margin-right: 8px;
        }

        /* Order Form */
        .order-form-container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: var(--shadow);
            max-width: 600px;
            margin: 0 auto;
            animation: fadeIn 0.5s ease;
        }

        .order-summary {
            background: var(--light);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
        }

        .order-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        /* Profile, Orders, Messages Sections */
        .user-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: var(--shadow);
            display: none;
        }

        .user-section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .profile-header {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
        }

        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2.5rem;
            margin-right: 20px;
        }

        .profile-info h2 {
            margin-bottom: 5px;
        }

        .profile-info p {
            color: var(--gray);
        }

        .profile-form {
            max-width: 500px;
        }

        /* Orders Section */
        .orders-list {
            margin-top: 20px;
        }

        .order-card {
            background: var(--light);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid var(--primary);
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .order-id {
            font-weight: 600;
            color: var(--primary);
        }

        .order-date {
            color: var(--gray);
            font-size: 0.9rem;
        }

        .order-details {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            gap: 15px;
        }

        .order-product {
            font-weight: 500;
        }

        .order-amount {
            text-align: right;
            font-weight: 600;
        }

        .order-status {
            text-align: center;
        }

        /* Messages Section */
        .messages-section {
            display: flex;
            flex-direction: column;
            height: 500px;
        }

        .messages-list {
            flex: 1;
            overflow-y: auto;
            border: 1px solid #eee;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .message {
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            max-width: 80%;
        }

        .message.user {
            background: #e3f2fd;
            margin-left: auto;
        }

        .message.admin {
            background: #f5f5f5;
        }

        .message-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.85rem;
            color: var(--gray);
        }

        .message-form {
            display: flex;
            gap: 10px;
        }

        .message-input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
        }

        /* Live Chat */
        .live-chat-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 350px;
            height: 450px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.15);
            display: flex;
            flex-direction: column;
            z-index: 1000;
            transform: translateY(100%);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .live-chat-container.active {
            transform: translateY(0);
            opacity: 1;
        }

        .chat-header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 15px;
            border-radius: 15px 15px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-title {
            font-weight: 600;
        }

        .chat-close {
            background: none;
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
        }

        .chat-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
        }

        .chat-input-container {
            padding: 15px;
            border-top: 1px solid #eee;
        }

        .chat-input {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        .chat-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            z-index: 1001;
            transition: var(--transition);
        }

        .chat-toggle:hover {
            transform: scale(1.1);
        }

        /* Admin Panel */
        .admin-panel {
            background: white;
            border-radius: 15px;
            box-shadow: var(--shadow);
            overflow: hidden;
            display: none;
        }

        .admin-panel.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .admin-header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .admin-nav {
            background: var(--light);
            padding: 15px 20px;
            display: flex;
            gap: 15px;
            border-bottom: 1px solid #eee;
        }

        .admin-nav-btn {
            padding: 8px 15px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
        }

        .admin-nav-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .admin-content {
            padding: 25px;
        }

        .admin-section {
            display: none;
        }

        .admin-section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        th {
            background: var(--light);
            font-weight: 600;
        }

        tr:hover {
            background: #f9f9f9;
        }

        .status-badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }

        .status-confirmed {
            background: #d1ecf1;
            color: #0c5460;
        }

        .status-cancelled {
            background: #f8d7da;
            color: #721c24;
        }

        .admin-chat-container {
            height: 500px;
            display: flex;
            flex-direction: column;
        }

        .admin-chat-messages {
            flex: 1;
            overflow-y: auto;
            border: 1px solid #eee;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .admin-chat-input-container {
            display: flex;
            gap: 10px;
        }

        /* Footer */
        footer {
            background: var(--dark);
            color: white;
            padding: 40px 0 20px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .footer-column h3 {
            font-size: 1.2rem;
            margin-bottom: 20px;
            position: relative;
            padding-bottom: 10px;
        }

        .footer-column h3:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 40px;
            height: 3px;
            background: var(--primary);
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 10px;
        }

        .footer-links a {
            color: #bbb;
            text-decoration: none;
            transition: var(--transition);
        }

        .footer-links a:hover {
            color: white;
            padding-left: 5px;
        }

        .copyright {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid #444;
            color: #bbb;
            font-size: 0.9rem;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { 
                opacity: 0;
                transform: translateY(20px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Hidden Admin Access */
        .admin-access {
            position: fixed;
            bottom: 90px;
            right: 20px;
            background: var(--dark);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 1000;
            box-shadow: var(--shadow);
            transition: var(--transition);
            display: none;
        }

        .admin-access:hover {
            transform: scale(1.1);
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            z-index: 10000;
            box-shadow: var(--shadow);
            transform: translateX(150%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: var(--success);
        }

        .notification.error {
            background: var(--danger);
        }

        .notification.info {
            background: var(--primary);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            .search-bar {
                max-width: 100%;
                margin: 10px 0;
            }
            
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
            
            .admin-nav {
                flex-wrap: wrap;
            }
            
            .order-details {
                grid-template-columns: 1fr;
            }
            
            .profile-header {
                flex-direction: column;
                text-align: center;
            }
            
            .profile-avatar {
                margin-right: 0;
                margin-bottom: 15px;
            }
            
            .product-details-content {
                flex-direction: column;
            }
            
            .product-details-image {
                max-width: 100%;
                margin-right: 0;
                margin-bottom: 20px;
            }
            
            .live-chat-container {
                width: 300px;
                height: 400px;
            }
        }
    </style>
</head>
<body>
    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo" id="homeLink">
                    <i class="fas fa-shopping-bag"></i>
                    ProShop
                </div>
                <div class="search-bar">
                    <input type="text" id="searchInput" placeholder="Search products...">
                    <button id="searchBtn"><i class="fas fa-search"></i></button>
                </div>
                <div class="nav-buttons">
                    <div class="user-menu">
                        <button class="nav-btn" id="userBtn">
                            <i class="fas fa-user"></i>
                        </button>
                        <div class="user-dropdown" id="userDropdown">
                            <a href="#" id="profileLink">My Profile</a>
                            <a href="#" id="ordersLink">Order History</a>
                            <a href="#" id="messagesLink">Messages</a>
                            <a href="#" id="adminLink" style="display: none;">Admin Panel</a>
                            <a href="#" id="logoutLink">Logout</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="main-content">
        <div class="container">
            <!-- Authentication Forms (Initially Visible) -->
            <div id="authContainer" class="auth-container">
                <div class="auth-form" id="loginForm">
                    <h2 class="form-title">Login to Your Account</h2>
                    <div class="form-group">
                        <label for="loginEmail">Email</label>
                        <input type="email" id="loginEmail" class="form-control" placeholder="Enter your email" value="admin@proshop.com">
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Password</label>
                        <input type="password" id="loginPassword" class="form-control" placeholder="Enter your password" value="admin123">
                    </div>
                    <button class="btn btn-block" id="loginBtn">Login</button>
                    <div class="form-footer">
                        <p>Don't have an account? <a href="#" id="showRegister">Register</a></p>
                    </div>
                    <div class="form-footer" style="margin-top: 10px;">
                        <p><small>Demo Admin: admin@proshop.com / admin123</small></p>
                    </div>
                </div>

                <div class="auth-form" id="registerForm" style="display: none;">
                    <h2 class="form-title">Create an Account</h2>
                    <div class="form-group">
                        <label for="registerName">Full Name</label>
                        <input type="text" id="registerName" class="form-control" placeholder="Enter your full name">
                    </div>
                    <div class="form-group">
                        <label for="registerEmail">Email</label>
                        <input type="email" id="registerEmail" class="form-control" placeholder="Enter your email">
                    </div>
                    <div class="form-group">
                        <label for="registerPassword">Password</label>
                        <input type="password" id="registerPassword" class="form-control" placeholder="Create a password">
                    </div>
                    <div class="form-group">
                        <label for="registerConfirmPassword">Confirm Password</label>
                        <input type="password" id="registerConfirmPassword" class="form-control" placeholder="Confirm your password">
                    </div>
                    <button class="btn btn-block" id="registerBtn">Register</button>
                    <div class="form-footer">
                        <p>Already have an account? <a href="#" id="showLogin">Login</a></p>
                    </div>
                </div>
            </div>

            <!-- Product Catalog (Initially Hidden) -->
            <div id="productCatalog" style="display: none;">
                <h2 class="section-title">Our Products</h2>
                <div class="products-grid" id="productsGrid">
                    <!-- Products will be loaded here dynamically -->
                </div>
            </div>

            <!-- Product Details (Initially Hidden) -->
            <div id="productDetails" class="product-details">
                <a href="#" class="back-to-home" id="backToHome">
                    <i class="fas fa-arrow-left"></i> Back to Home
                </a>
                <div class="product-details-content" id="productDetailsContent">
                    <!-- Product details will be populated here -->
                </div>
            </div>

            <!-- Order Form (Initially Hidden) -->
            <div id="orderFormContainer" style="display: none;">
                <a href="#" class="back-to-home" id="backToHomeFromOrder">
                    <i class="fas fa-arrow-left"></i> Back to Home
                </a>
                <div class="order-form-container">
                    <h2 class="form-title">Place Your Order</h2>
                    <div class="order-summary" id="orderSummary">
                        <!-- Order summary will be populated here -->
                    </div>
                    <form id="orderForm">
                        <div class="form-group">
                            <label for="customerName">Full Name</label>
                            <input type="text" id="customerName" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="customerAddress">Delivery Address</label>
                            <textarea id="customerAddress" class="form-control" rows="3" required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="customerPhone">Phone Number</label>
                            <input type="tel" id="customerPhone" class="form-control" required>
                        </div>
                        <button type="submit" class="btn btn-block">Place Order</button>
                    </form>
                </div>
            </div>

            <!-- Profile Section (Initially Hidden) -->
            <div id="profileSection" class="user-section">
                <a href="#" class="back-to-home" id="backToHomeFromProfile">
                    <i class="fas fa-arrow-left"></i> Back to Home
                </a>
                <div class="profile-header">
                    <div class="profile-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="profile-info">
                        <h2 id="profileUserName">User Name</h2>
                        <p id="profileUserEmail">user@example.com</p>
                    </div>
                </div>
                <h3 class="section-title">Update Profile</h3>
                <form class="profile-form" id="profileForm">
                    <div class="form-group">
                        <label for="profileName">Full Name</label>
                        <input type="text" id="profileName" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="profileEmail">Email</label>
                        <input type="email" id="profileEmail" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="profilePhone">Phone Number</label>
                        <input type="tel" id="profilePhone" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="profileAddress">Address</label>
                        <textarea id="profileAddress" class="form-control" rows="3"></textarea>
                    </div>
                    <button type="submit" class="btn">Update Profile</button>
                </form>
            </div>

            <!-- Orders Section (Initially Hidden) -->
            <div id="ordersSection" class="user-section">
                <a href="#" class="back-to-home" id="backToHomeFromOrders">
                    <i class="fas fa-arrow-left"></i> Back to Home
                </a>
                <h2 class="section-title">Order History</h2>
                <div class="orders-list" id="ordersList">
                    <!-- Orders will be populated here -->
                </div>
            </div>

            <!-- Messages Section (Initially Hidden) -->
            <div id="messagesSection" class="user-section">
                <a href="#" class="back-to-home" id="backToHomeFromMessages">
                    <i class="fas fa-arrow-left"></i> Back to Home
                </a>
                <h2 class="section-title">Messages</h2>
                <div class="messages-section">
                    <div class="messages-list" id="messagesList">
                        <!-- Messages will be populated here -->
                    </div>
                    <div class="message-form">
                        <input type="text" class="message-input" id="messageInput" placeholder="Type your message...">
                        <button class="btn" id="sendMessageBtn">Send</button>
                    </div>
                </div>
            </div>

            <!-- Admin Panel (Initially Hidden) -->
            <div id="adminPanel" class="admin-panel">
                <a href="#" class="back-to-home" id="backToHomeFromAdmin">
                    <i class="fas fa-arrow-left"></i> Back to Home
                </a>
                <div class="admin-header">
                    <h2><i class="fas fa-cog"></i> Admin Panel</h2>
                    <button class="btn btn-warning" id="exitAdminBtn">Exit Admin</button>
                </div>
                <div class="admin-nav">
                    <button class="admin-nav-btn active" data-section="orders">Orders</button>
                    <button class="admin-nav-btn" data-section="products">Products</button>
                    <button class="admin-nav-btn" data-section="users">Users</button>
                    <button class="admin-nav-btn" data-section="messages">Messages</button>
                    <button class="admin-nav-btn" data-section="chat">Live Chat</button>
                </div>
                <div class="admin-content">
                    <!-- Orders Section -->
                    <div class="admin-section active" id="adminOrdersSection">
                        <h3>Order Management</h3>
                        <div class="table-container">
                            <table id="ordersTable">
                                <thead>
                                    <tr>
                                        <th>Order ID</th>
                                        <th>Customer</th>
                                        <th>Product</th>
                                        <th>Amount</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Orders will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Products Section -->
                    <div class="admin-section" id="adminProductsSection">
                        <h3>Product Management</h3>
                        <button class="btn" id="addProductBtn">Add New Product</button>
                        <div class="table-container" style="margin-top: 20px;">
                            <table id="productsTable">
                                <thead>
                                    <tr>
                                        <th>Image</th>
                                        <th>Title</th>
                                        <th>Price</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Products will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Users Section -->
                    <div class="admin-section" id="adminUsersSection">
                        <h3>User Management</h3>
                        <div class="table-container">
                            <table id="usersTable">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Email</th>
                                        <th>Orders</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Users will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Messages Section -->
                    <div class="admin-section" id="adminMessagesSection">
                        <h3>Customer Messages</h3>
                        <div class="messages-container" id="adminMessages">
                            <!-- Messages will be populated here -->
                        </div>
                    </div>

                    <!-- Live Chat Section -->
                    <div class="admin-section" id="adminChatSection">
                        <h3>Live Chat Support</h3>
                        <div class="admin-chat-container">
                            <div class="admin-chat-messages" id="adminChatMessages">
                                <!-- Chat messages will be populated here -->
                            </div>
                            <div class="admin-chat-input-container">
                                <input type="text" class="message-input" id="adminChatInput" placeholder="Type your message...">
                                <button class="btn" id="adminSendMessageBtn">Send</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Live Chat -->
    <div class="live-chat-container" id="liveChatContainer">
        <div class="chat-header">
            <div class="chat-title">Live Support</div>
            <button class="chat-close" id="chatClose"><i class="fas fa-times"></i></button>
        </div>
        <div class="chat-messages" id="chatMessages">
            <!-- Chat messages will be populated here -->
        </div>
        <div class="chat-input-container">
            <input type="text" class="chat-input" id="chatInput" placeholder="Type your message...">
        </div>
    </div>

    <div class="chat-toggle" id="chatToggle">
        <i class="fas fa-comments"></i>
    </div>

    <!-- Hidden Admin Access Button -->
    <div class="admin-access" id="adminAccessBtn" title="Admin Access">
        <i class="fas fa-lock"></i>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>ProShop</h3>
                    <p>Your one-stop destination for all your shopping needs. Quality products, fast delivery, and excellent customer service.</p>
                </div>
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="#" id="footerHomeLink">Home</a></li>
                        <li><a href="#">Products</a></li>
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Customer Service</h3>
                    <ul class="footer-links">
                        <li><a href="#">FAQ</a></li>
                        <li><a href="#">Shipping Policy</a></li>
                        <li><a href="#">Returns & Refunds</a></li>
                        <li><a href="#">Track Order</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Contact Us</h3>
                    <ul class="footer-links">
                        <li><i class="fas fa-map-marker-alt"></i> 123 Business Ave, City</li>
                        <li><i class="fas fa-phone"></i> +1 234 567 890</li>
                        <li><i class="fas fa-envelope"></i> info@proshop.com</li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                &copy; 2023 ProShop. All rights reserved.
            </div>
        </div>
    </footer>

    <!-- Firebase Configuration and App Logic -->
    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAEckGoJXFWwAbQ7yFVg261EC8DksmgxSY",
            authDomain: "islamic---web.firebaseapp.com",
            projectId: "islamic---web",
            storageBucket: "islamic---web.firebasestorage.app",
            messagingSenderId: "82764871971",
            appId: "1:82764871971:web:1bec96ff6431e94e99b496",
            measurementId: "G-YVV8J8EDRP"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        
        // DOM Elements
        const authContainer = document.getElementById('authContainer');
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');
        const productCatalog = document.getElementById('productCatalog');
        const productDetails = document.getElementById('productDetails');
        const orderFormContainer = document.getElementById('orderFormContainer');
        const profileSection = document.getElementById('profileSection');
        const ordersSection = document.getElementById('ordersSection');
        const messagesSection = document.getElementById('messagesSection');
        const adminPanel = document.getElementById('adminPanel');
        const adminAccessBtn = document.getElementById('adminAccessBtn');
        const adminLink = document.getElementById('adminLink');
        const notification = document.getElementById('notification');
        const liveChatContainer = document.getElementById('liveChatContainer');
        const chatToggle = document.getElementById('chatToggle');
        const chatClose = document.getElementById('chatClose');
        
        // Current user data
        let currentUser = null;
        let userData = {};
        let currentProduct = null;
        let chatMessages = [];
        let adminChatMessages = [];
        
        // Show notification function
        function showNotification(message, type = 'info') {
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // Play sound function
        function playSound(type) {
            // Create audio context
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            
            // Create oscillator
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            // Set different frequencies based on sound type
            if (type === 'success') {
                oscillator.frequency.value = 800;
                gainNode.gain.value = 0.1;
            } else if (type === 'error') {
                oscillator.frequency.value = 400;
                gainNode.gain.value = 0.1;
            } else if (type === 'message') {
                oscillator.frequency.value = 600;
                gainNode.gain.value = 0.1;
            } else if (type === 'notification') {
                oscillator.frequency.value = 700;
                gainNode.gain.value = 0.1;
            } else if (type === 'chat') {
                oscillator.frequency.value = 500;
                gainNode.gain.value = 0.1;
            }
            
            oscillator.type = 'sine';
            
            // Play the sound
            oscillator.start();
            gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.5);
            oscillator.stop(audioContext.currentTime + 0.5);
        }
        
        // Authentication state listener
        auth.onAuthStateChanged(user => {
            if (user) {
                // User is signed in
                currentUser = user;
                authContainer.style.display = 'none';
                productCatalog.style.display = 'block';
                
                // Load user data
                loadUserData(user.uid);
                
                // Check if user is admin
                checkAdminStatus(user);
                
                // Load products
                loadProducts();
                
                showNotification(`Welcome back, ${user.email || 'User'}!`, 'success');
                playSound('success');
            } else {
                // User is signed out
                currentUser = null;
                userData = {};
                authContainer.style.display = 'flex';
                productCatalog.style.display = 'none';
                orderFormContainer.style.display = 'none';
                profileSection.style.display = 'none';
                ordersSection.style.display = 'none';
                messagesSection.style.display = 'none';
                adminPanel.style.display = 'none';
                adminAccessBtn.style.display = 'none';
                adminLink.style.display = 'none';
                productDetails.style.display = 'none';
                liveChatContainer.classList.remove('active');
            }
        });
        
        // Load user data
        function loadUserData(uid) {
            // Try to get user data from localStorage first
            const storedUserData = localStorage.getItem(`userData_${uid}`);
            if (storedUserData) {
                userData = JSON.parse(storedUserData);
                updateProfileDisplay();
            } else {
                // Initialize with default data
                userData = {
                    name: currentUser.displayName || currentUser.email.split('@')[0],
                    email: currentUser.email,
                    phone: '',
                    address: '',
                    orders: [],
                    messages: []
                };
                saveUserData();
            }
            
            // Load orders and messages
            loadUserOrders();
            loadUserMessages();
            
            // Load chat messages
            loadChatMessages();
        }
        
        // Save user data to localStorage
        function saveUserData() {
            if (currentUser) {
                localStorage.setItem(`userData_${currentUser.uid}`, JSON.stringify(userData));
            }
        }
        
        // Update profile display
        function updateProfileDisplay() {
            document.getElementById('profileUserName').textContent = userData.name;
            document.getElementById('profileUserEmail').textContent = userData.email;
            document.getElementById('profileName').value = userData.name;
            document.getElementById('profileEmail').value = userData.email;
            document.getElementById('profilePhone').value = userData.phone || '';
            document.getElementById('profileAddress').value = userData.address || '';
        }
        
        // Check if user is admin
        function checkAdminStatus(user) {
            // For demo purposes, we'll check email
            const adminEmails = ['admin@proshop.com', 'admin@example.com'];
            
            if (adminEmails.includes(user.email)) {
                adminAccessBtn.style.display = 'flex';
                adminLink.style.display = 'block';
                showNotification('Admin access granted', 'success');
            } else {
                adminAccessBtn.style.display = 'none';
                adminLink.style.display = 'none';
            }
        }
        
        // Login functionality
        document.getElementById('loginBtn').addEventListener('click', () => {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            auth.signInWithEmailAndPassword(email, password)
                .then(userCredential => {
                    // Login successful
                    console.log("User logged in:", userCredential.user);
                })
                .catch(error => {
                    showNotification("Login failed: " + error.message, 'error');
                    playSound('error');
                });
        });
        
        // Register functionality
        document.getElementById('registerBtn').addEventListener('click', () => {
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;
            
            if (password !== confirmPassword) {
                showNotification("Passwords don't match!", 'error');
                playSound('error');
                return;
            }
            
            auth.createUserWithEmailAndPassword(email, password)
                .then(userCredential => {
                    // Set display name
                    return userCredential.user.updateProfile({
                        displayName: name
                    });
                })
                .then(() => {
                    // Registration successful
                    showNotification('Account created successfully!', 'success');
                    playSound('success');
                })
                .catch(error => {
                    showNotification("Registration failed: " + error.message, 'error');
                    playSound('error');
                });
        });
        
        // Toggle between login and register forms
        document.getElementById('showRegister').addEventListener('click', (e) => {
            e.preventDefault();
            loginForm.style.display = 'none';
            registerForm.style.display = 'block';
        });
        
        document.getElementById('showLogin').addEventListener('click', (e) => {
            e.preventDefault();
            registerForm.style.display = 'none';
            loginForm.style.display = 'block';
        });
        
        // Logout functionality
        document.getElementById('logoutLink').addEventListener('click', (e) => {
            e.preventDefault();
            auth.signOut();
            showNotification('You have been logged out', 'info');
        });
        
        // User menu navigation
        document.getElementById('profileLink').addEventListener('click', (e) => {
            e.preventDefault();
            hideAllSections();
            profileSection.style.display = 'block';
            profileSection.classList.add('active');
            document.getElementById('userDropdown').classList.remove('active');
        });
        
        document.getElementById('ordersLink').addEventListener('click', (e) => {
            e.preventDefault();
            hideAllSections();
            ordersSection.style.display = 'block';
            ordersSection.classList.add('active');
            document.getElementById('userDropdown').classList.remove('active');
        });
        
        document.getElementById('messagesLink').addEventListener('click', (e) => {
            e.preventDefault();
            hideAllSections();
            messagesSection.style.display = 'block';
            messagesSection.classList.add('active');
            document.getElementById('userDropdown').classList.remove('active');
        });
        
        document.getElementById('adminLink').addEventListener('click', (e) => {
            e.preventDefault();
            hideAllSections();
            adminPanel.style.display = 'block';
            adminPanel.classList.add('active');
            loadAdminData();
            document.getElementById('userDropdown').classList.remove('active');
        });
        
        // Home navigation
        document.getElementById('homeLink').addEventListener('click', (e) => {
            e.preventDefault();
            goToHome();
        });
        
        document.getElementById('footerHomeLink').addEventListener('click', (e) => {
            e.preventDefault();
            goToHome();
        });
        
        // Back to home buttons
        document.getElementById('backToHome').addEventListener('click', (e) => {
            e.preventDefault();
            goToHome();
        });
        
        document.getElementById('backToHomeFromOrder').addEventListener('click', (e) => {
            e.preventDefault();
            goToHome();
        });
        
        document.getElementById('backToHomeFromProfile').addEventListener('click', (e) => {
            e.preventDefault();
            goToHome();
        });
        
        document.getElementById('backToHomeFromOrders').addEventListener('click', (e) => {
            e.preventDefault();
            goToHome();
        });
        
        document.getElementById('backToHomeFromMessages').addEventListener('click', (e) => {
            e.preventDefault();
            goToHome();
        });
        
        document.getElementById('backToHomeFromAdmin').addEventListener('click', (e) => {
            e.preventDefault();
            goToHome();
        });
        
        // Go to home function
        function goToHome() {
            hideAllSections();
            productCatalog.style.display = 'block';
            playSound('notification');
        }
        
        // Admin access
        adminAccessBtn.addEventListener('click', () => {
            hideAllSections();
            adminPanel.style.display = 'block';
            adminPanel.classList.add('active');
            loadAdminData();
            showNotification('Admin panel loaded', 'info');
        });
        
        // Exit admin panel
        document.getElementById('exitAdminBtn').addEventListener('click', () => {
            adminPanel.style.display = 'none';
            adminPanel.classList.remove('active');
            productCatalog.style.display = 'block';
            showNotification('Returned to shopping', 'info');
        });
        
        // Hide all sections
        function hideAllSections() {
            productCatalog.style.display = 'none';
            orderFormContainer.style.display = 'none';
            profileSection.style.display = 'none';
            ordersSection.style.display = 'none';
            messagesSection.style.display = 'none';
            adminPanel.style.display = 'none';
            productDetails.style.display = 'none';
            
            // Remove active class
            profileSection.classList.remove('active');
            ordersSection.classList.remove('active');
            messagesSection.classList.remove('active');
            adminPanel.classList.remove('active');
            productDetails.classList.remove('active');
        }
        
        // Admin navigation
        document.querySelectorAll('.admin-nav-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                // Remove active class from all buttons
                document.querySelectorAll('.admin-nav-btn').forEach(b => {
                    b.classList.remove('active');
                });
                
                // Add active class to clicked button
                btn.classList.add('active');
                
                // Hide all sections
                document.querySelectorAll('.admin-section').forEach(section => {
                    section.classList.remove('active');
                });
                
                // Show selected section
                const sectionId = 'admin' + btn.getAttribute('data-section').charAt(0).toUpperCase() + btn.getAttribute('data-section').slice(1) + 'Section';
                document.getElementById(sectionId).classList.add('active');
            });
        });
        
        // Load sample products
        function loadProducts() {
            const productsGrid = document.getElementById('productsGrid');
            
            // Sample products
            const products = [
                {
                    id: 1,
                    title: "Wireless Bluetooth Headphones",
                    description: "High-quality wireless headphones with noise cancellation and long battery life. Perfect for music lovers and professionals who need focus. Features include comfortable ear cushions, foldable design, and up to 30 hours of battery life.",
                    price: 79.99,
                    image: "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80"
                },
                {
                    id: 2,
                    title: "Smart Fitness Watch",
                    description: "Track your workouts, heart rate, and sleep patterns with this advanced smartwatch. Water-resistant design, GPS tracking, and compatibility with both iOS and Android devices. Stay connected with notifications and control your music right from your wrist.",
                    price: 129.99,
                    image: "https://images.unsplash.com/photo-1523275335684-37898b6baf30?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80"
                },
                {
                    id: 3,
                    title: "Portable Power Bank",
                    description: "10000mAh power bank with fast charging capability for all your devices. Compact and lightweight design makes it perfect for travel. Includes multiple USB ports to charge multiple devices simultaneously.",
                    price: 29.99,
                    image: "https://images.unsplash.com/photo-1609592810794-1c0d4762b9a8?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80"
                },
                {
                    id: 4,
                    title: "Laptop Backpack",
                    description: "Durable and stylish backpack with dedicated laptop compartment and multiple pockets. Water-resistant material protects your electronics. Ergonomic design with padded straps for comfortable carrying.",
                    price: 49.99,
                    image: "https://images.unsplash.com/photo-1553062407-98eeb64c6a62?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80"
                }
            ];
            
            // Clear existing products
            productsGrid.innerHTML = '';
            
            // Add products to grid
            products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.innerHTML = `
                    <img src="${product.image}" alt="${product.title}" class="product-img">
                    <div class="product-info">
                        <h3 class="product-title">${product.title}</h3>
                        <p class="product-description">${product.description}</p>
                        <div class="product-price">$${product.price}</div>
                        <div class="product-actions">
                            <button class="btn" onclick="orderProduct(${product.id})">Order Now</button>
                            <button class="btn btn-success" onclick="viewProductDetails(${product.id})">View Details</button>
                        </div>
                    </div>
                `;
                productsGrid.appendChild(productCard);
            });
        }
        
        // View product details
        function viewProductDetails(productId) {
            const products = [
                {
                    id: 1,
                    title: "Wireless Bluetooth Headphones",
                    description: "High-quality wireless headphones with noise cancellation and long battery life. Perfect for music lovers and professionals who need focus. Features include comfortable ear cushions, foldable design, and up to 30 hours of battery life.",
                    price: 79.99,
                    image: "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80"
                },
                {
                    id: 2,
                    title: "Smart Fitness Watch",
                    description: "Track your workouts, heart rate, and sleep patterns with this advanced smartwatch. Water-resistant design, GPS tracking, and compatibility with both iOS and Android devices. Stay connected with notifications and control your music right from your wrist.",
                    price: 129.99,
                    image: "https://images.unsplash.com/photo-1523275335684-37898b6baf30?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80"
                },
                {
                    id: 3,
                    title: "Portable Power Bank",
                    description: "10000mAh power bank with fast charging capability for all your devices. Compact and lightweight design makes it perfect for travel. Includes multiple USB ports to charge multiple devices simultaneously.",
                    price: 29.99,
                    image: "https://images.unsplash.com/photo-1609592810794-1c0d4762b9a8?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80"
                },
                {
                    id: 4,
                    title: "Laptop Backpack",
                    description: "Durable and stylish backpack with dedicated laptop compartment and multiple pockets. Water-resistant material protects your electronics. Ergonomic design with padded straps for comfortable carrying.",
                    price: 49.99,
                    image: "https://images.unsplash.com/photo-1553062407-98eeb64c6a62?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80"
                }
            ];
            
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            currentProduct = product;
            
            // Populate product details
            const productDetailsContent = document.getElementById('productDetailsContent');
            productDetailsContent.innerHTML = `
                <div class="product-details-image">
                    <img src="${product.image}" alt="${product.title}">
                </div>
                <div class="product-details-info">
                    <h1 class="product-details-title">${product.title}</h1>
                    <div class="product-details-price">$${product.price}</div>
                    <p class="product-details-description">${product.description}</p>
                    <div class="product-actions">
                        <button class="btn" onclick="orderProduct(${product.id})">Order Now</button>
                        <button class="btn btn-success" onclick="sendMessageAboutProduct(${product.id})">Ask Question</button>
                    </div>
                </div>
            `;
            
            // Show product details
            hideAllSections();
            productDetails.style.display = 'block';
            productDetails.classList.add('active');
            
            playSound('notification');
        }
        
        // Order product function
        function orderProduct(productId) {
            // In a real app, you would fetch product details from Firestore
            const products = [
                {
                    id: 1,
                    title: "Wireless Bluetooth Headphones",
                    price: 79.99
                },
                {
                    id: 2,
                    title: "Smart Fitness Watch",
                    price: 129.99
                },
                {
                    id: 3,
                    title: "Portable Power Bank",
                    price: 29.99
                },
                {
                    id: 4,
                    title: "Laptop Backpack",
                    price: 49.99
                }
            ];
            
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            // Show order form
            hideAllSections();
            orderFormContainer.style.display = 'block';
            
            // Populate order summary
            const orderSummary = document.getElementById('orderSummary');
            const deliveryCharge = 110;
            const total = product.price + deliveryCharge;
            
            orderSummary.innerHTML = `
                <h3>Order Summary</h3>
                <div class="order-item">
                    <span>Product:</span>
                    <span>${product.title}</span>
                </div>
                <div class="order-item">
                    <span>Product Price:</span>
                    <span>$${product.price}</span>
                </div>
                <div class="order-item">
                    <span>Delivery Charge:</span>
                    <span>$${deliveryCharge}</span>
                </div>
                <div class="order-item" style="font-weight: bold; border-bottom: none;">
                    <span>Total:</span>
                    <span>$${total}</span>
                </div>
            `;
            
            // Store product info for form submission
            document.getElementById('orderForm').dataset.productId = productId;
        }
        
        // Submit order form
        document.getElementById('orderForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const user = auth.currentUser;
            if (!user) return;
            
            const productId = parseInt(e.target.dataset.productId);
            const name = document.getElementById('customerName').value;
            const address = document.getElementById('customerAddress').value;
            const phone = document.getElementById('customerPhone').value;
            
            // Get product details
            const products = [
                {
                    id: 1,
                    title: "Wireless Bluetooth Headphones",
                    price: 79.99
                },
                {
                    id: 2,
                    title: "Smart Fitness Watch",
                    price: 129.99
                },
                {
                    id: 3,
                    title: "Portable Power Bank",
                    price: 29.99
                },
                {
                    id: 4,
                    title: "Laptop Backpack",
                    price: 49.99
                }
            ];
            
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            // Create order data
            const orderData = {
                orderId: 'ORD' + Date.now(),
                userId: user.uid,
                userName: name,
                userEmail: user.email,
                userAddress: address,
                userPhone: phone,
                productId: productId,
                productName: product.title,
                productPrice: product.price,
                deliveryCharge: 110,
                totalAmount: product.price + 110,
                status: 'pending',
                createdAt: new Date().toISOString()
            };
            
            // Add order to user data
            userData.orders.push(orderData);
            saveUserData();
            
            // Play success sound
            playSound('success');
            
            // Show success message
            showNotification('Order placed successfully! You will receive a confirmation soon.', 'success');
            
            // Return to product catalog
            orderFormContainer.style.display = 'none';
            productCatalog.style.display = 'block';
            
            // Reset form
            e.target.reset();
        });
        
        // Update profile
        document.getElementById('profileForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            userData.name = document.getElementById('profileName').value;
            userData.email = document.getElementById('profileEmail').value;
            userData.phone = document.getElementById('profilePhone').value;
            userData.address = document.getElementById('profileAddress').value;
            
            saveUserData();
            updateProfileDisplay();
            
            showNotification('Profile updated successfully!', 'success');
            playSound('success');
        });
        
        // Load user orders
        function loadUserOrders() {
            const ordersList = document.getElementById('ordersList');
            
            if (userData.orders.length === 0) {
                ordersList.innerHTML = '<p>No orders found.</p>';
                return;
            }
            
            ordersList.innerHTML = '';
            
            userData.orders.forEach(order => {
                const orderCard = document.createElement('div');
                orderCard.className = 'order-card';
                orderCard.innerHTML = `
                    <div class="order-header">
                        <div class="order-id">${order.orderId}</div>
                        <div class="order-date">${new Date(order.createdAt).toLocaleDateString()}</div>
                    </div>
                    <div class="order-details">
                        <div class="order-product">${order.productName}</div>
                        <div class="order-status">
                            <span class="status-badge status-${order.status}">${order.status}</span>
                        </div>
                        <div class="order-amount">$${order.totalAmount}</div>
                    </div>
                `;
                ordersList.appendChild(orderCard);
            });
        }
        
        // Load user messages
        function loadUserMessages() {
            const messagesList = document.getElementById('messagesList');
            
            if (userData.messages.length === 0) {
                messagesList.innerHTML = '<p>No messages yet. Start a conversation!</p>';
                return;
            }
            
            messagesList.innerHTML = '';
            
            userData.messages.forEach(message => {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${message.sender === 'user' ? 'user' : 'admin'}`;
                messageDiv.innerHTML = `
                    <div class="message-header">
                        <span>${message.sender === 'user' ? 'You' : 'Admin'}</span>
                        <span>${new Date(message.timestamp).toLocaleString()}</span>
                    </div>
                    <div class="message-text">${message.text}</div>
                `;
                messagesList.appendChild(messageDiv);
            });
            
            // Scroll to bottom
            messagesList.scrollTop = messagesList.scrollHeight;
        }
        
        // Send message
        document.getElementById('sendMessageBtn').addEventListener('click', () => {
            const messageInput = document.getElementById('messageInput');
            const text = messageInput.value.trim();
            
            if (text === '') return;
            
            const message = {
                text: text,
                sender: 'user',
                timestamp: new Date().toISOString()
            };
            
            userData.messages.push(message);
            saveUserData();
            loadUserMessages();
            
            messageInput.value = '';
            
            playSound('message');
            showNotification('Message sent!', 'success');
            
            // Simulate admin reply after a delay
            setTimeout(() => {
                const adminReply = {
                    text: "Thank you for your message. We'll get back to you soon!",
                    sender: 'admin',
                    timestamp: new Date().toISOString()
                };
                
                userData.messages.push(adminReply);
                saveUserData();
                loadUserMessages();
                
                playSound('notification');
            }, 2000);
        });
        
        // Send message about product
        function sendMessageAboutProduct(productId) {
            const products = [
                {
                    id: 1,
                    title: "Wireless Bluetooth Headphones"
                },
                {
                    id: 2,
                    title: "Smart Fitness Watch"
                },
                {
                    id: 3,
                    title: "Portable Power Bank"
                },
                {
                    id: 4,
                    title: "Laptop Backpack"
                }
            ];
            
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            const message = {
                text: `I have a question about ${product.title}`,
                sender: 'user',
                timestamp: new Date().toISOString(),
                productId: productId
            };
            
            userData.messages.push(message);
            saveUserData();
            
            // Navigate to messages section
            hideAllSections();
            messagesSection.style.display = 'block';
            messagesSection.classList.add('active');
            
            loadUserMessages();
            
            playSound('message');
            showNotification('Message sent!', 'success');
            
            // Simulate admin reply after a delay
            setTimeout(() => {
                const adminReply = {
                    text: `Thank you for your interest in ${product.title}. What would you like to know?`,
                    sender: 'admin',
                    timestamp: new Date().toISOString(),
                    productId: productId
                };
                
                userData.messages.push(adminReply);
                saveUserData();
                loadUserMessages();
                
                playSound('notification');
            }, 2000);
        }
        
        // Live Chat functionality
        chatToggle.addEventListener('click', () => {
            liveChatContainer.classList.toggle('active');
            if (liveChatContainer.classList.contains('active')) {
                playSound('chat');
            }
        });
        
        chatClose.addEventListener('click', () => {
            liveChatContainer.classList.remove('active');
        });
        
        // Load chat messages
        function loadChatMessages() {
            const chatMessagesContainer = document.getElementById('chatMessages');
            
            // Initialize with welcome message if no messages
            if (chatMessages.length === 0) {
                const welcomeMessage = {
                    text: "Hello! How can we help you today?",
                    sender: 'admin',
                    timestamp: new Date().toISOString()
                };
                chatMessages.push(welcomeMessage);
            }
            
            chatMessagesContainer.innerHTML = '';
            
            chatMessages.forEach(message => {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${message.sender === 'user' ? 'user' : 'admin'}`;
                messageDiv.innerHTML = `
                    <div class="message-header">
                        <span>${message.sender === 'user' ? 'You' : 'Support'}</span>
                        <span>${new Date(message.timestamp).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</span>
                    </div>
                    <div class="message-text">${message.text}</div>
                `;
                chatMessagesContainer.appendChild(messageDiv);
            });
            
            // Scroll to bottom
            chatMessagesContainer.scrollTop = chatMessagesContainer.scrollHeight;
        }
        
        // Send chat message
        document.getElementById('chatInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                const text = e.target.value.trim();
                if (text === '') return;
                
                const message = {
                    text: text,
                    sender: 'user',
                    timestamp: new Date().toISOString()
                };
                
                chatMessages.push(message);
                loadChatMessages();
                
                e.target.value = '';
                
                playSound('chat');
                
                // Simulate admin reply after a delay
                setTimeout(() => {
                    const adminReply = {
                        text: "Thanks for your message! Our support team will respond shortly.",
                        sender: 'admin',
                        timestamp: new Date().toISOString()
                    };
                    
                    chatMessages.push(adminReply);
                    loadChatMessages();
                    
                    playSound('notification');
                }, 1500);
            }
        });
        
        // Admin chat functionality
        document.getElementById('adminSendMessageBtn').addEventListener('click', () => {
            const adminChatInput = document.getElementById('adminChatInput');
            const text = adminChatInput.value.trim();
            
            if (text === '') return;
            
            const message = {
                text: text,
                sender: 'admin',
                timestamp: new Date().toISOString()
            };
            
            adminChatMessages.push(message);
            loadAdminChatMessages();
            
            adminChatInput.value = '';
            
            playSound('chat');
        });
        
        // Load admin chat messages
        function loadAdminChatMessages() {
            const adminChatMessagesContainer = document.getElementById('adminChatMessages');
            
            // Initialize with welcome message if no messages
            if (adminChatMessages.length === 0) {
                const welcomeMessage = {
                    text: "Welcome to admin chat. You can communicate with users here.",
                    sender: 'system',
                    timestamp: new Date().toISOString()
                };
                adminChatMessages.push(welcomeMessage);
            }
            
            adminChatMessagesContainer.innerHTML = '';
            
            adminChatMessages.forEach(message => {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${message.sender === 'user' ? 'user' : 'admin'}`;
                messageDiv.innerHTML = `
                    <div class="message-header">
                        <span>${message.sender === 'user' ? 'Customer' : 'You'}</span>
                        <span>${new Date(message.timestamp).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</span>
                    </div>
                    <div class="message-text">${message.text}</div>
                `;
                adminChatMessagesContainer.appendChild(messageDiv);
            });
            
            // Scroll to bottom
            adminChatMessagesContainer.scrollTop = adminChatMessagesContainer.scrollHeight;
        }
        
        // Load admin data
        function loadAdminData() {
            // For demo purposes, we'll use sample data
            // In a real app, you would fetch from Firestore
            
            // Sample orders
            const orders = userData.orders || [];
            
            // Populate orders table
            const ordersTable = document.getElementById('ordersTable').getElementsByTagName('tbody')[0];
            ordersTable.innerHTML = '';
            
            if (orders.length === 0) {
                const row = ordersTable.insertRow();
                row.innerHTML = `<td colspan="6" style="text-align: center;">No orders found</td>`;
            } else {
                orders.forEach(order => {
                    const row = ordersTable.insertRow();
                    row.innerHTML = `
                        <td>${order.orderId}</td>
                        <td>${order.userName}</td>
                        <td>${order.productName}</td>
                        <td>$${order.totalAmount}</td>
                        <td><span class="status-badge status-${order.status}">${order.status}</span></td>
                        <td>
                            <button class="btn btn-success" onclick="updateOrderStatus('${order.orderId}', 'confirmed')">Confirm</button>
                            <button class="btn btn-danger" onclick="updateOrderStatus('${order.orderId}', 'cancelled')">Cancel</button>
                        </td>
                    `;
                });
            }
            
            // Sample products for admin
            const products = [
                {
                    id: 1,
                    title: "Wireless Bluetooth Headphones",
                    price: 79.99,
                    image: "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80"
                },
                {
                    id: 2,
                    title: "Smart Fitness Watch",
                    price: 129.99,
                    image: "https://images.unsplash.com/photo-1523275335684-37898b6baf30?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80"
                }
            ];
            
            // Populate products table
            const productsTable = document.getElementById('productsTable').getElementsByTagName('tbody')[0];
            productsTable.innerHTML = '';
            
            products.forEach(product => {
                const row = productsTable.insertRow();
                row.innerHTML = `
                    <td><img src="${product.image}" alt="${product.title}" style="width: 50px; height: 50px; object-fit: cover; border-radius: 5px;"></td>
                    <td>${product.title}</td>
                    <td>$${product.price}</td>
                    <td>
                        <button class="btn">Edit</button>
                        <button class="btn btn-danger">Delete</button>
                    </td>
                `;
            });
            
            // Sample users
            const users = [
                {
                    name: 'John Doe',
                    email: 'john@example.com',
                    orders: 3,
                    status: 'active'
                },
                {
                    name: 'Jane Smith',
                    email: 'jane@example.com',
                    orders: 5,
                    status: 'active'
                },
                {
                    name: userData.name,
                    email: userData.email,
                    orders: userData.orders.length,
                    status: 'active'
                }
            ];
            
            // Populate users table
            const usersTable = document.getElementById('usersTable').getElementsByTagName('tbody')[0];
            usersTable.innerHTML = '';
            
            users.forEach(user => {
                const row = usersTable.insertRow();
                row.innerHTML = `
                    <td>${user.name}</td>
                    <td>${user.email}</td>
                    <td>${user.orders}</td>
                    <td>${user.status}</td>
                `;
            });
            
            // Load messages for admin
            const adminMessagesContainer = document.getElementById('adminMessages');
            adminMessagesContainer.innerHTML = '';
            
            if (userData.messages.length === 0) {
                adminMessagesContainer.innerHTML = '<p style="text-align: center;">No messages found</p>';
            } else {
                userData.messages.forEach(message => {
                    const messageDiv = document.createElement('div');
                    messageDiv.className = `message ${message.sender === 'user' ? 'user' : 'admin'}`;
                    messageDiv.innerHTML = `
                        <div class="message-header">
                            <span>${message.sender === 'user' ? userData.name : 'Admin'}</span>
                            <span>${new Date(message.timestamp).toLocaleString()}</span>
                        </div>
                        <div class="message-text">${message.text}</div>
                    `;
                    adminMessagesContainer.appendChild(messageDiv);
                });
            }
            
            // Load admin chat
            loadAdminChatMessages();
        }
        
        // Update order status
        function updateOrderStatus(orderId, status) {
            // Find and update the order
            const orderIndex = userData.orders.findIndex(order => order.orderId === orderId);
            if (orderIndex !== -1) {
                userData.orders[orderIndex].status = status;
                saveUserData();
                
                // Play sound based on action
                if (status === 'confirmed') {
                    playSound('success');
                    showNotification(`Order ${orderId} confirmed!`, 'success');
                } else if (status === 'cancelled') {
                    playSound('error');
                    showNotification(`Order ${orderId} cancelled!`, 'error');
                }
                
                // Reload admin data to reflect changes
                loadAdminData();
            }
        }
        
        // Initialize the app
        function initApp() {
            // User dropdown toggle
            document.getElementById('userBtn').addEventListener('click', () => {
                document.getElementById('userDropdown').classList.toggle('active');
            });
            
            // Close dropdown when clicking outside
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.user-menu')) {
                    document.getElementById('userDropdown').classList.remove('active');
                }
            });
            
            // Search functionality
            document.getElementById('searchBtn').addEventListener('click', () => {
                const searchTerm = document.getElementById('searchInput').value;
                if (searchTerm) {
                    showNotification(`Searching for: ${searchTerm}`, 'info');
                playSound('notification');
                // In a real app, you would filter products here
                setTimeout(() => {
                    showNotification(`No results found for "${searchTerm}"`, 'info');
                }, 1000);
                }
            });
            
            // Add product button
            document.getElementById('addProductBtn').addEventListener('click', () => {
                showNotification('Add product form would open here', 'info');
                playSound('notification');
            });
        }
        
        // Run initialization when DOM is loaded
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>